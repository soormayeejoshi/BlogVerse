(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49],{8260:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/search/[term]",function(){return s(2421)}])},9893:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(3943).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2421:(e,t,s)=>{"use strict";s.r(t),s.d(t,{__N_SSG:()=>w,default:()=>v});var r=s(4848),a=s(6540),l=s(6715),n=s(2576),o=s(6404),c=s(2955),i=s(9893),u=s(6229),m=s(1123),d=s(8140),h=s.n(d),x=s(4721),g=s(4342),f=s(9535),p=s(3804),_=s(9575),y=s(7515);let j=e=>{let{searchTerm:t}=e,s=(0,l.useRouter)(),[n,o]=(0,a.useState)(s.query.term||""),[u,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{s.query.term&&o(decodeURIComponent(t))},[s.query.term]);let d=async e=>{e.preventDefault(),n.length<3||n.length>50||n===t||(m(!0),await s.push("/search/".concat(encodeURIComponent(n.trim().replace(/\s+/g,"-")))),m(!1))};return(0,r.jsxs)("form",{onSubmit:d,className:"appcontainer w-full !max-w-sm mx-auto",children:[(0,r.jsxs)("div",{className:"text-right text-xs color__text__light mb-3","data-nosnippet":!0,children:[(0,r.jsx)("span",{children:"Search by"}),(0,r.jsx)("a",{href:"https://www.algolia.com/?utm_source=website&utm_medium=referrals&utm_campaign=free-trial-undraw.co&utm_content=undraw.co",target:"_blank",content:"nofollow",rel:"noreferrer noopener",children:(0,r.jsx)("img",{src:"/Algolia-logo-blue.svg",alt:"Algolia logo",className:"inline-block w-16 ml-1"})})]}),(0,r.jsxs)("div",{className:"flex gap-2 relative",children:[(0,r.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"Search illustrations...",className:"flex text-base md:text-sm h-10 border border-gray-400 bg-gray-50 rounded-md w-full px-3 py-2 ring-offset-gray-50 placeholder-gray-400 focus-visible:bg-white focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 outline-none transition-colors duration-200 ease-in-out",minLength:3,maxLength:50,required:!0,autoFocus:!0}),(0,r.jsx)("button",{type:"submit",className:"btn btn__icon shrink-0",disabled:u,"aria-label":"Search button",children:u?(0,r.jsx)(c.A,{className:"size-5 animate-spin"}):(0,r.jsx)(i.A,{className:"size-5"})})]})]})};function b(e){let{initialResults:t,total:s,initialHasMore:l,term:n,searchTerm:o,activeColor:c,setSelected:i}=e,[m,d]=(0,a.useState)(t),[h,x]=(0,a.useState)(l),[g,f]=(0,a.useState)(!1),[_,y]=(0,a.useState)(t.length),j=async()=>{if(!g){f(!0);try{let e=await fetch("/api/search?q=".concat(encodeURIComponent(o),"&offset=").concat(_));if(!e.ok)throw Error("Failed to fetch more results");let t=await e.json();d(e=>[...e,...t.results]),x(t.hasMore),y(e=>e+t.results.length),(0,p.sendGAEvent)("event","load_more_search",{query:o,offset:_,results_loaded:t.results.length,has_more:t.hasMore})}catch(e){console.error("Error loading more results:",e)}finally{f(!1)}}};return(0,r.jsxs)("div",{className:"mt-14",children:[(0,r.jsx)(u.A,{illustrations:m,activeColor:c,setSelected:i}),h&&(0,r.jsx)("div",{className:"flex justify-center -mt-2 mb-16",children:(0,r.jsx)("button",{onClick:j,disabled:g,className:"btn btn__primary",children:g?"Loading...":"Load more"})})]})}var w=!0;function v(e){let{activeColor:t,updateColor:s}=(0,o.N)(),[l,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{setTimeout(()=>{(0,p.sendGAEvent)("event","search_results",{query:e.searchTerm,results_count:e.total,has_results:e.total>0})},500)},[]);let u=async(e,s)=>{try{h()(e,s,"image/svg"),(0,f.tM)(l._id,"svg"),(0,p.sendGAEvent)("event","file_download",{file_type:"svg",illustration:s.replace(".svg",""),source:"/search",is_default_color:"#6c63ff"===t}),c(null)}catch(t){let e="string"==typeof t?t:t.error||"Something went wrong, please try again.";x.oR.custom(t=>(0,r.jsx)(_.a,{message:e}))}},d=async(e,s)=>{try{h()(e,s,"image/png"),(0,f.tM)(l._id,"png"),(0,p.sendGAEvent)("event","file_download",{file_type:"png",illustration:s.replace(".png",""),source:"/search",is_default_color:"#6c63ff"===t}),c(null)}catch(t){let e="string"==typeof t?t:t.error||"Something went wrong, please try again.";x.oR.custom(t=>(0,r.jsx)(_.a,{message:e}))}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{title:"Search - ".concat(e.searchTerm," | unDraw"),description:"Beautiful, open source and free illustrations for ".concat(e.searchTerm,"."),url:"https://undraw.co/search/".concat(e.term)}),(0,r.jsx)(n.A,{activeColor:t,updateColor:s}),(0,r.jsx)("header",{className:"appcontainer mb-8 py-4",children:(0,r.jsxs)("div",{className:"max-w-[560px] text-center mx-auto",children:[(0,r.jsxs)("div",{className:"font-extrabold text-4xl tracking-tight mb-3 flex items-center justify-center",children:[(0,r.jsx)(i.A,{className:"mr-2 mt-1",strokeWidth:3,size:28}),(0,r.jsxs)("div",{className:"flex items-end",children:[(0,r.jsx)("h1",{children:e.searchTerm}),(0,r.jsx)("small",{className:"text-xs font-normal tracking-normal mb-1 ml-3 color__text__light",children:"Search results"})]})]}),(0,r.jsxs)("p",{className:"color__text__light text-pretty",children:["Beautiful, open source and free illustrations for ",e.searchTerm,"."]})]})}),(0,r.jsx)(j,{searchTerm:e.searchTerm}),(0,r.jsx)(b,{...e,searchTerm:e.searchTerm,activeColor:t,setSelected:c},e.term),(0,r.jsx)(y.A,{}),(0,r.jsx)(m.A,{illustration:l,handleDialogClose:()=>c(null),downloadSvg:u,downloadPng:d}),(0,r.jsx)(x.l$,{})]})}},6715:(e,t,s)=>{e.exports=s(8440)}},e=>{var t=t=>e(e.s=t);e.O(0,[111,301,193,63,273,186,636,593,792],()=>t(8260)),_N_E=e.O()}]);